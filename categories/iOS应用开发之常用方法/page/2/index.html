<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Page 2 | iOS应用开发之常用方法 | 一枝红杏出墙来</title>
  <meta name="author" content="尹现伟">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="一枝红杏出墙来"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.ico" rel="shortcut icon">
  <link rel="alternate" href="/atom.xml" title="一枝红杏出墙来" type="application/atom+xml">
  <link rel="stylesheet" href="/css/font-awesome.min.css" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
  

</head>


<body>
  <header id="header" class="inner"><div id="nav-top">
  <div class="alignleft main-title">
    <h1>一枝红杏出墙来</h1>
    <h2></h2>
  </div>
  <nav id="main-nav" class="alignright">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
    </ul>
    <div class="clearfix"></div>
  </nav>
  <div class="clearfix"></div>
</div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
<h2 class="archive-title category">iOS应用开发之常用方法</h2>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
      
        <div class="icon"></div>
        <time datetime="2014-02-24T09:08:00.000Z"><a href="/2014/02/24/objective-c宏定义/">2月 24 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/02/24/objective-c宏定义/">objective-c宏定义</a></h1>
  

      
    </header>
    <div class="entry">
      
        
        <p><strong>本文转自:<a href="http://blog.csdn.net/wangqiuyun/article/details/8104698" target="_blank" rel="external">http://blog.csdn.net/wangqiuyun/article/details/8104698</a></strong><br><strong>1、先来几个常用的：</strong></p>
<p><strong>[csharp]</strong> <a href="http://blog.csdn.net/wangqiuyun/article/details/8104698#" title="view plain" target="_blank" rel="external">view<br> plain</a><a href="http://blog.csdn.net/wangqiuyun/article/details/8104698#" title="copy" target="_blank" rel="external">copy</a>1. // 是否高清屏  </p>
<ol>
<li><h1 id="define_isRetina_([UIScreen_instancesRespondToSelector:@selector(currentMode)]_?_CGSizeEqualToSize(CGSizeMake(640,_960),_[[UIScreen_mainScreen]_currentMode]-size)_:_NO)">define isRetina ([UIScreen instancesRespondToSelector:@selector(currentMode)] ? CGSizeEqualToSize(CGSizeMake(640, 960), [[UIScreen mainScreen] currentMode].size) : NO)</h1>
</li>
<li>// 是否模拟器  </li>
<li><h1 id="define_isSimulator_(NSNotFound_!=_[[[UIDevice_currentDevice]_model]_rangeOfString:@”Simulator”]-location)">define isSimulator (NSNotFound != [[[UIDevice currentDevice] model] rangeOfString:@”Simulator”].location)</h1>
</li>
<li>// 是否iPad  </li>
<li><h1 id="define_isPad_(UI_USER_INTERFACE_IDIOM()_==_UIUserInterfaceIdiomPad)">define isPad (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)</h1>
</li>
<li>// 是否iPad  </li>
<li><h1 id="define_someThing_(UI_USER_INTERFACE_IDIOM()_==_UIUserInterfaceIdiomPad)?_ipad:_iphone">define someThing (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)? ipad: iphone</h1>
</li>
</ol>
<p><strong>2、基本的使用：</strong></p>
<p><strong>[html]</strong> <a href="http://blog.csdn.net/wangqiuyun/article/details/8104698#" title="view plain" target="_blank" rel="external">view<br> plain</a><a href="http://blog.csdn.net/wangqiuyun/article/details/8104698#" title="copy" target="_blank" rel="external">copy</a>1. //定义π值 3.1415926    </p>
<ol>
<li><h1 id="define_PI_3-1415926">define PI 3.1415926</h1>
</li>
<li>//则在程序用可以如下使用       </li>
<li>double i=2<em>PI</em>3;     </li>
<li>//效果相当于  double i=2<em>3.1415926</em>3;    </li>
<li></li>
<li>//预处理命令可以定义任何符合格式的形式，例如判断年份是否闰年  </li>
<li><h1 id="define_IS_LEAP_YEAR_year%4==0&amp;&amp;year%100!=0||year%400==0">define  IS_LEAP_YEAR  year%4==0&amp;&amp;year%100!=0||year%400==0</h1>
</li>
<li>//使用时则可以直接    </li>
<li>if(IS_LEAP_YEAR)    </li>
<li></li>
<li>//或者可以定义一个参数      </li>
<li><h1 id="define_IS_LEAP_YEAR(y)_y%4==0&amp;&amp;y%100!=0||y%400==0">define  IS_LEAP_YEAR(y)  y%4==0&amp;&amp;y%100!=0||y%400==0</h1>
</li>
<li>//使用时则可以直接     </li>
<li>int ys=2012;     </li>
<li>if(IS_LEAP_YEAR(ys))       </li>
<li></li>
<li>//通常预处理程序定义在一行 如果好分行 比如说太长需要换行  需要使用“/”符号 表示还有下一行，多行分列也是如此，例：    </li>
<li><h1 id="Define_IS_LEAP_YEAR_year%4==0&amp;&amp;year%100!=0/">Define  IS_LEAP_YEAR  year%4==0&amp;&amp;year%100!=0/</h1>
</li>
<li>||year%400==0     </li>
<li>//宏定义参数后边放一个# 那么在调用该宏时，预处理程序将根据宏参数创建C风格的常量字符串 例：    </li>
<li><h1 id="define_STR(x)_#_x">define STR(x) # x</h1>
</li>
<li>//将会使得 随后调用的      </li>
<li></li>
<li>NSLOG(STR(Programming in Objective-c./n));    </li>
<li>//显示结果为 Programming in Objective-c./n  </li>
</ol>
<p><strong>3、关于#与##的操作符：</strong></p>
<p><1>.宏定义中字符串化操作符#：</1></p>
<h1 id="的功能是将其后面的宏参数进行字符串化操作，意思就是对它所应用的宏变量通过替换后在其左右各加上一个双引号。例如">的功能是将其后面的宏参数进行字符串化操作，意思就是对它所应用的宏变量通过替换后在其左右各加上一个双引号。例如</h1>
<p><strong>[csharp]</strong> <a href="http://blog.csdn.net/wangqiuyun/article/details/8104698#" title="view plain" target="_blank" rel="external">view<br> plain</a><a href="http://blog.csdn.net/wangqiuyun/article/details/8104698#" title="copy" target="_blank" rel="external">copy</a>1. #define WARN_IF(EXPR)\  </p>
<ol>
<li>do {\  </li>
<li>if (EXPR)\  </li>
<li>fprintf(stderr, “Warning: “ #EXPR “\n”);\  </li>
<li>} while(0)  </li>
<li></li>
<li>上面代码中的反斜线\主要用来转译换行符，即屏蔽换行符。  </li>
<li></li>
<li>那么如下的代码调用：  </li>
<li>WARN_IF(divider == 0);  </li>
<li></li>
<li>将被解析为：  </li>
<li>do {\  </li>
<li>if (divider == 0)\  </li>
<li>fprintf(stderr, “Warning: “ “divider == 0” “\n”);\  </li>
<li>} while(0);  </li>
</ol>
<p>注意能够字符串化操作的必须是宏参数，不是随随便便的某个子串（token）都行的。</p>
<p><2>.宏定义中的连接符##：<br>连接符##用来将两个token连接为一个token，但它不可以位于第一个token之前or最后一个token之后。注意这里连接的对象只要是token就行，而不一定是宏参数,但是##又必须位于宏定义中才有效，因其为编译期概念（比较绕）。</2></p>
<p><strong>[html]</strong> <a href="http://blog.csdn.net/wangqiuyun/article/details/8104698#" title="view plain" target="_blank" rel="external">view<br> plain</a><a href="http://blog.csdn.net/wangqiuyun/article/details/8104698#" title="copy" target="_blank" rel="external">copy</a>1. #define LINK<em>MULTIPLE(a, b, c, d) a##</em>##b##<em>##c##</em>##d  </p>
<ol>
<li>typedef struct _record_type LINK_MULTIPLE(name, company, position, salary);  </li>
<li>/*  </li>
<li><ul>
<li>上面的代码将被替换为  </li>
</ul>
</li>
<li><ul>
<li>typedef struct _record_type name_company_position_salary;  </li>
</ul>
</li>
<li>*/  </li>
<li></li>
<li>又如下面的例子：  </li>
<li><h1 id="define_PARSER(N)_printf(“token”_#N_“_=_%d\n”,_token##N)">define PARSER(N) printf(“token” #N “ = %d\n”, token##N)</h1>
</li>
<li></li>
<li>int token64 = 64;  </li>
<li></li>
<li>如下调用宏：  </li>
<li>PARSER(64);  </li>
<li></li>
<li>将被解析为：  </li>
<li>printf(“token” “64” “ = %d\n”, token64);  </li>
<li></li>
<li>在obj-c中，如果我有如下定义：  </li>
<li><h1 id="define__X(A,_B)_(A#B)">define _X(A, B) (A#B)</h1>
</li>
<li><h1 id="define__XX(A,_B)__X([NSString_stringWithFormat:@”%@_c”,_A],_B)">define _XX(A, B) _X([NSString stringWithFormat:@”%@_c”, A], B)</h1>
</li>
<li>gcc将报错！  </li>
<li>正确的写法为：  </li>
<li><h1 id="define__XX(A,_B)__X(([NSString_stringWithFormat:@”%@_c”,_A]),_B)">define _XX(A, B) _X(([NSString stringWithFormat:@”%@_c”, A]), B)</h1>
</li>
</ol>
<p><strong>4、再来个宏定义 object-c 单例</strong></p>
<p><strong>[csharp]</strong> <a href="http://blog.csdn.net/wangqiuyun/article/details/8104698#" title="view plain" target="_blank" rel="external">view<br> plain</a><a href="http://blog.csdn.net/wangqiuyun/article/details/8104698#" title="copy" target="_blank" rel="external">copy</a>1. #define GTMOBJECT<em>SINGLETON_BOILERPLATE(_object_name</em>, <em>shared_obj_name</em>)  </p>
<ol>
<li>static <em>object_name</em> *z##<em>shared_obj_name</em> = nil;   </li>
<li><ul>
<li>(<em>object_name</em> *)<em>shared_obj_name</em> {              </li>
</ul>
</li>
<li>@synchronized(self) {                             </li>
<li>if (z##<em>shared_obj_name</em> == nil) {              </li>
<li>/<em> Note that ‘self’ may not be the same as <em>object_name</em> </em>/                                </li>
<li>/<em> first assignment done in allocWithZone but we must reassign in case init fails </em>/       </li>
<li>z##<em>shared_obj_name</em> = [[self alloc] init];                                                </li>
<li><em>GTMDevAssert((z##_shared_obj_name</em> != nil), @”didn’t catch singleton allocation”);        </li>
<li>}                                               </li>
<li>}                                                 </li>
<li>return z##<em>shared_obj_name</em>;                      </li>
<li>}                                                   </li>
<li></li>
<li><ul>
<li>(id)allocWithZone:(NSZone *)zone {                </li>
</ul>
</li>
<li>@synchronized(self) {                             </li>
<li>if (z##<em>shared_obj_name</em> == nil) {              </li>
<li>z##<em>shared_obj_name</em> = [super allocWithZone:zone];  </li>
<li>return z##<em>shared_obj_name</em>;                  </li>
<li>}                                               </li>
<li>}                                                 </li>
<li></li>
<li>/<em> We can’t return the shared instance, because it’s been init’d </em>/  </li>
<li>_GTMDevAssert(NO, @”use the singleton API, not alloc+init”);         </li>
<li>return nil;                                       </li>
<li>}                                                   </li>
<li></li>
<li><ul>
<li>(id)retain {                                      </li>
</ul>
</li>
<li>return self;                                      </li>
<li>}                                                   </li>
<li></li>
<li><ul>
<li>(NSUInteger)retainCount {                         </li>
</ul>
</li>
<li>return NSUIntegerMax;                             </li>
<li>}                                                   </li>
<li></li>
<li><ul>
<li>(void)release {                                   </li>
</ul>
</li>
<li>}                                                   </li>
<li></li>
<li><ul>
<li>(id)autorelease {                                 </li>
</ul>
</li>
<li>return self;                                      </li>
<li>}                                                   </li>
<li></li>
<li><ul>
<li>(id)copyWithZone:(NSZone *)zone {                 </li>
</ul>
</li>
<li>return self;                                      </li>
<li>}  </li>
</ol>
<p><strong>5、条件编译：</strong></p>
<p><strong>[csharp]</strong> <a href="http://blog.csdn.net/wangqiuyun/article/details/8104698#" title="view plain" target="_blank" rel="external">view<br> plain</a><a href="http://blog.csdn.net/wangqiuyun/article/details/8104698#" title="copy" target="_blank" rel="external">copy</a>1. #if !defined(FCDebug) || FCDebug == 0  </p>
<ol>
<li><h1 id="define_FCLOG(…)_do_{}_while_(0)">define FCLOG(…) do {} while (0)</h1>
</li>
<li><h1 id="define_FCLOGINFO(…)_do_{}_while_(0)">define FCLOGINFO(…) do {} while (0)</h1>
</li>
<li><h1 id="define_FCLOGERROR(…)_do_{}_while_(0)">define FCLOGERROR(…) do {} while (0)</h1>
</li>
<li></li>
<li><h1 id="elif_FCDebug_==_1">elif FCDebug == 1</h1>
</li>
<li><h1 id="define_FCLOG(…)_NSLog(VA_ARGS)">define FCLOG(…) NSLog(<strong>VA_ARGS</strong>)</h1>
</li>
<li><h1 id="define_FCLOGERROR(…)_NSLog(VA_ARGS)">define FCLOGERROR(…) NSLog(<strong>VA_ARGS</strong>)</h1>
</li>
<li><h1 id="define_FCLOGINFO(…)_do_{}_while_(0)-1">define FCLOGINFO(…) do {} while (0)</h1>
</li>
<li></li>
<li><h1 id="elif_FCDebug_&gt;_1">elif FCDebug &gt; 1</h1>
</li>
<li><h1 id="define_FCLOG(…)_NSLog(VA_ARGS)-1">define FCLOG(…) NSLog(<strong>VA_ARGS</strong>)</h1>
</li>
<li><h1 id="define_FCLOGERROR(…)_NSLog(VA_ARGS)-1">define FCLOGERROR(…) NSLog(<strong>VA_ARGS</strong>)</h1>
</li>
<li><h1 id="define_FCLOGINFO(…)_NSLog(VA_ARGS)">define FCLOGINFO(…) NSLog(<strong>VA_ARGS</strong>)</h1>
</li>
<li><h1 id="endif">endif</h1>
</li>
</ol>
<p><strong>6、参照C语言的预处理命令简介 ：</strong></p>
<h1 id="define_定义一个预处理宏">define              定义一个预处理宏</h1>
<h1 id="undef_取消宏的定义">undef               取消宏的定义</h1>
<h1 id="include_包含文件命令">include            包含文件命令</h1>
<h1 id="include_next_与#include相似,_但它有着特殊的用途">include_next   与#include相似, 但它有着特殊的用途</h1>
<h1 id="if_编译预处理中的条件命令,_相当于C语法中的if语句">if                      编译预处理中的条件命令, 相当于C语法中的if语句</h1>
<h1 id="ifdef_判断某个宏是否被定义,_若已定义,_执行随后的语句">ifdef                判断某个宏是否被定义, 若已定义, 执行随后的语句</h1>
<h1 id="ifndef_与#ifdef相反,_判断某个宏是否未被定义">ifndef             与#ifdef相反, 判断某个宏是否未被定义</h1>
<h1 id="elif_若#if,_#ifdef,_#ifndef或前面的#elif条件不满足,_则执行#elif之后的语句,_相当于C语法中的else-if">elif                  若#if, #ifdef, #ifndef或前面的#elif条件不满足, 则执行#elif之后的语句, 相当于C语法中的else-if</h1>
<h1 id="else_与#if,_#ifdef,_#ifndef对应,_若这些条件不满足,_则执行#else之后的语句,_相当于C语法中的else">else                与#if, #ifdef, #ifndef对应, 若这些条件不满足, 则执行#else之后的语句, 相当于C语法中的else</h1>
<h1 id="endif_#if,_#ifdef,_#ifndef这些条件命令的结束标志-">endif              #if, #ifdef, #ifndef这些条件命令的结束标志.</h1>
<p>defined            与#if, #elif配合使用, 判断某个宏是否被定义</p>
<h1 id="line_标志该语句所在的行号">line                标志该语句所在的行号</h1>
<h1 id="将宏参数替代为以参数值为内容的字符窜常量">将宏参数替代为以参数值为内容的字符窜常量</h1>
<h2 id="将两个相邻的标记(token)连接为一个单独的标记">将两个相邻的标记(token)连接为一个单独的标记</h2>
<h1 id="pragma_说明编译器信息#warning_显示编译警告信息">pragma        说明编译器信息#warning       显示编译警告信息</h1>
<h1 id="error_显示编译错误信息">error            显示编译错误信息</h1>
<p>参考链接：<a href="http://www.uml.org.cn/c++/200902104.asp" target="_blank" rel="external">http://www.uml.org.cn/c++/200902104.asp</a></p>

      
    </div>
    <footer>
      
  
  <div class="categories">
    <a href="/categories/iOS应用开发之常用方法/">iOS应用开发之常用方法</a>
  </div>

      
  
  <div class="tags">
    <a href="/tags/objective-c/">objective-c</a>, <a href="/tags/宏/">宏</a>, <a href="/tags/iphone开发/">iphone开发</a>
  </div>

      
        
          <div class="alignright share-box">
  
</div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
      
        <div class="icon"></div>
        <time datetime="2014-02-24T05:35:00.000Z"><a href="/2014/02/24/iOS7应用国际化/">2月 24 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/02/24/iOS7应用国际化/">iOS7应用国际化</a></h1>
  

      
    </header>
    <div class="entry">
      
        
        <p>一 应用名字国际化:1. 新建一个工程test.</p>
<ol>
<li>首先修改应用名字</li>
<li><p>test-&gt;PROJECT-&gt;Info-&gt;Localizations-&gt;+号-&gt;Simplified<img src="http://img.blog.csdn.net/20140224131250015?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWluX3hpYW53ZWk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""></p>
</li>
<li><p>在(English)添加CFBundleDisplayName=”English”;</p>
</li>
<li>在(Simplified)添加CFBundleDisplayName=”中文”;<img src="http://img.blog.csdn.net/20140224131753703?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWluX3hpYW53ZWk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""></li>
<li>启动应用就会按照本地语言加载应用的名称.</li>
</ol>
<p>二 应用内容国际化1. New File-&gt;String Flies,文件名字必须写Localizable,否则iOS识别不了,选择Localizable.strings,右边点击Localize…选择语言.<img src="" alt=""></p>
<ol>
<li>添加之后右边的Licalization会列出你支持的语言,全部勾上.</li>
<li><p>Localizable.strings会有你选择的两种语言的Strings文件.</p>
</li>
<li><p>在(English)里添加”key” = “English”;</p>
</li>
<li>在(Simplified)里添加”key” = “中文”;<img src="http://img.blog.csdn.net/20140224132942609?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWluX3hpYW53ZWk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""></li>
<li>添加一个Label就可以看到效果了.<img src="http://img.blog.csdn.net/20140224133121703?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWluX3hpYW53ZWk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""></li>
<li>当然还有获取当前语言的方法    </li>
</ol>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSArray</span> *languages = [NSLocale preferredLanguages];</div><div class="line">    <span class="built_in">NSString</span> *language = [languages objectAtIndex:<span class="number">0</span>];</div><div class="line">    <span class="built_in">NSLog</span> ( <span class="string">@"%@"</span> , language);</div></pre></td></tr></table></figure>


      
    </div>
    <footer>
      
  
  <div class="categories">
    <a href="/categories/iOS应用开发之常用方法/">iOS应用开发之常用方法</a>
  </div>

      
  
  <div class="tags">
    <a href="/tags/ios国际化/">ios国际化</a>, <a href="/tags/iphone开发/">iphone开发</a>, <a href="/tags/国际化/">国际化</a>
  </div>

      
        
          <div class="alignright share-box">
  
</div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
      
        <div class="icon"></div>
        <time datetime="2014-02-21T08:29:00.000Z"><a href="/2014/02/21/stringByEvaluatingJavaScriptFromString的使用方法/">2月 21 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/02/21/stringByEvaluatingJavaScriptFromString的使用方法/">stringByEvaluatingJavaScriptFromString的使用方法</a></h1>
  

      
    </header>
    <div class="entry">
      
        
        <p>　来源：　朱祁林 麒麟的blogstringByEvaluatingJavaScriptFromString使用stringByEvaluatingJavaScriptFromString方法，需要等UIWebView中的页面加载完成之后去调用。我们在界面上拖放一个UIWebView控件。在Load中将googlemobile加载到这个控件中，代码如下：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)viewDidLoad</div><div class="line"> {</div><div class="line"> [<span class="keyword">super</span> viewDidLoad];</div><div class="line"> webview<span class="variable">.backgroundColor</span> = [<span class="built_in">UIColor</span> clearColor];</div><div class="line"> webview<span class="variable">.scalesPageToFit</span> =<span class="literal">YES</span>;</div><div class="line"> webview<span class="variable">.delegate</span> =<span class="keyword">self</span>;</div><div class="line"> <span class="built_in">NSURL</span> *url =[[<span class="built_in">NSURL</span> alloc] initWithString:<span class="string">@"http://www.google.com.hk/m?gl=CN&hl=zh_CN&source=ihp"</span>];</div><div class="line"></div><div class="line"> <span class="built_in">NSURLRequest</span> *request = [[<span class="built_in">NSURLRequest</span> alloc] initWithURL:url];</div><div class="line"> [webview loadRequest:request];</div><div class="line">}</div></pre></td></tr></table></figure>

<p>我们在webViewDidFinishLoad方法中就可以通过javascript操作界面元素了。1、获取当前页面的url。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)webViewDidFinishLoad:(<span class="built_in">UIWebView</span> *)webView {</div><div class="line"> <span class="built_in">NSString</span> *currentURL = [webView stringByEvaluatingJavaScriptFromString:<span class="string">@"document.location.href"</span>];</div><div class="line"> }</div></pre></td></tr></table></figure>

<p>2、获取页面title：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)webViewDidFinishLoad:(<span class="built_in">UIWebView</span> *)webView {</div><div class="line"> <span class="built_in">NSString</span> *currentURL = [webView stringByEvaluatingJavaScriptFromString:<span class="string">@"document.location.href"</span>];</div><div class="line"></div><div class="line"> <span class="built_in">NSString</span> *title = [webview stringByEvaluatingJavaScriptFromString:<span class="string">@"document.title"</span>];</div><div class="line">}</div></pre></td></tr></table></figure>

<p>3、修改界面元素的值。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSString</span> *js_result = [webView stringByEvaluatingJavaScriptFromString:<span class="string">@"document.getElementsByName('q')[0].value='朱祁林';"</span>];</div></pre></td></tr></table></figure>

<p>4、表单提交：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSString</span> *js_result2 = [webView stringByEvaluatingJavaScriptFromString:<span class="string">@"document.forms[0].submit(); "</span>];</div></pre></td></tr></table></figure>

<p>这样就实现了在google搜索关键字：“朱祁林”的功能。5、插入js代码上面的功能我们可以封装到一个js函数中，将这个函数插入到页面上执行，代码如下：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[webView stringByEvaluatingJavaScriptFromString:<span class="string">@"var script = document.createElement('script');"</span></div><div class="line"><span class="string">"script.type = 'text/javascript';"</span></div><div class="line"><span class="string">"script.text = \"function myFunction() { "</span></div><div class="line"><span class="string">"var field = document.getElementsByName('q')[0];"</span></div><div class="line"><span class="string">"field.value='朱祁林';"</span></div><div class="line"><span class="string">"document.forms[0].submit();"</span></div><div class="line"><span class="string">"}\";"</span></div><div class="line"><span class="string">"document.getElementsByTagName('head')[0].appendChild(script);"</span>];</div><div class="line"> [webView stringByEvaluatingJavaScriptFromString:<span class="string">@"myFunction();"</span>];</div></pre></td></tr></table></figure>

<p>看上面的代码：a、首先通过js创建一个script的标签，type为’text/javascript’。b、然后在这个标签中插入一段字符串，这段字符串就是一个函数：myFunction，这个函数实现google自动搜索关键字的功能。c、然后使用stringByEvaluatingJavaScriptFromString执行myFunction函数。演示：第一步打开google mobile网站 第二步输入关键字 第三步搜素 总结：这篇文章主要是讲解了stringByEvaluatingJavaScriptFromString的用法，它的功能非常的强大，用起来非常简单，通过它我们可以很方便的操作uiwebview中的页面元素。</p>

      
    </div>
    <footer>
      
  
  <div class="categories">
    <a href="/categories/iOS应用开发之常用方法/">iOS应用开发之常用方法</a>
  </div>

      
  
  <div class="tags">
    <a href="/tags/iphone开发/">iphone开发</a>, <a href="/tags/ios开发/">ios开发</a>, <a href="/tags/UIWebView/">UIWebView</a>
  </div>

      
        
          <div class="alignright share-box">
  
</div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
      
        <div class="icon"></div>
        <time datetime="2014-02-20T07:54:00.000Z"><a href="/2014/02/20/IOS回调机制——署理，通知中心以及Block/">2月 20 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/02/20/IOS回调机制——署理，通知中心以及Block/">IOS回调机制——署理，通知中心以及Block</a></h1>
  

      
    </header>
    <div class="entry">
      
        
        <h2 id="Xcode5-0正式版">Xcode5.0正式版</h2>
<p>IOS7和Xcode5正式版在昨天正式可以下载。IOS7不多说了，交互设计，界面风格，操作的简化程度都属于比较领先的水平。<br>这里来说说Xcode5正式版，和以前的Xcode5测试版来比，正式版改动不大，不过也有稍许变化。整体来讲，跟Xcode4.6比，属于换了一个时代- -(因为以前的工程换到这里编译需要改很多地方)<br>Xcode5给我的感觉就是：界面简洁扁平化，配置工程图形化，还有就是。。白。为什么说白，看看配置IB和配置工程就知道了。。。</p>
<p><img src="http://www.myexception.cn/img/2013/09/21/141350218.jpg" alt=""></p>
<p><img src="http://www.myexception.cn/img/2013/09/21/141350219.jpg" alt=""></p>
<p>相比4.6来讲，5在操作上还是有很多大的改进。也可以用于开发旧版本的项目，需要把arm64去掉，把XIB文件设置成之前的版本就好。不过也有一些细节需要注意。所以嫌麻烦的话可以用之前版本的- -。<br>言归正传，这里来认识下三种IOS常见的回调模式。</p>
<h2 id="代理模式">代理模式</h2>
<p>作为IOS中最常见的通讯模式，代理几乎无处不在。<br><img src="http://www.myexception.cn/img/2013/09/21/141350220.jpg" alt=""></p>
<p>看实例这里有一个数组，我们首先通过代理的方式将数组传递到其他方法中去。<br>设置协议及方法</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">@protocol CallBackDelegate;</div><div class="line"></div><div class="line">@interface ViewController : UIViewController</div><div class="line">@property (weak, nonatomic) id&lt;CallBackDelegate&gt; delegate;</div><div class="line">@end</div><div class="line"></div><div class="line">@protocol CallBackDelegate &lt;NSObject&gt;</div><div class="line">- (<span class="keyword">void</span>)showArrayWithDelegate:(NSArray *)<span class="built_in">array</span>;</div><div class="line">@end</div></pre></td></tr></table></figure>

<p>@interface ViewController () <callbackdelegate></callbackdelegate></p>
<p>点击按钮传递数组让其显示</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">- (IBAction)delegateCallBack</div><div class="line">{</div><div class="line">    NSDictionary *dict = @{@<span class="string">"array"</span>: @[@<span class="string">"Chelsea"</span>, @<span class="string">"MUFC"</span>, @<span class="string">"Real Madrid"</span>]};</div><div class="line">    NSArray *<span class="built_in">array</span> = dict[@<span class="string">"array"</span>];</div><div class="line">    [self.delegate showArrayWithDelegate:<span class="built_in">array</span>];</div><div class="line">}</div></pre></td></tr></table></figure>

<p>调用，显示</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)showArrayWithDelegate:(NSArray *)<span class="built_in">array</span></div><div class="line">{</div><div class="line">    _outputLabel.text = <span class="built_in">array</span>[<span class="number">2</span>];</div><div class="line">}</div></pre></td></tr></table></figure>

<p>最重要也是最容易忽略的，就是一定要设置delegate的指向。完成后屏幕显示<img src="http://www.myexception.cn/img/2013/09/21/141350221.jpg" alt=""></p>
<h2 id="使用通知中心">使用通知中心</h2>
<p>通知中心的方式可以不用设置代理，但是需要设置观察者和移除观察者。<br><img src="http://www.myexception.cn/img/2013/09/21/141350222.jpg" alt=""></p>
<p>代码</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">- (IBAction)callBack</div><div class="line">{</div><div class="line">    NSDictionary *dict = @{@<span class="string">"array"</span>: @[@<span class="string">"Chelsea"</span>, @<span class="string">"MUFC"</span>, @<span class="string">"Real Madrid"</span>]};</div><div class="line">    NSArray *<span class="built_in">array</span> = dict[@<span class="string">"array"</span>];</div><div class="line">    [[NSNotificationCenter defaultCenter] postNotificationName:@<span class="string">"OutputArrayNotification"</span> object:<span class="built_in">array</span>];</div><div class="line">}</div></pre></td></tr></table></figure>

<p>注册和移出观察者</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)viewWillAppear:(BOOL)animated</div><div class="line">{</div><div class="line">    [super viewWillAppear:animated];</div><div class="line">    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(outputWithNote:) name:@<span class="string">"OutputArrayNotification"</span> object:nil];</div><div class="line">}</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)viewDidDisappear:(BOOL)animated</div><div class="line">{</div><div class="line">    [super viewDidDisappear:animated];</div><div class="line">    [[NSNotificationCenter defaultCenter] removeObserver:self name:@<span class="string">"OutputArrayNotification"</span> object:nil];</div><div class="line">}</div></pre></td></tr></table></figure>

<p>显示</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)outputWithNote:(NSNotification *)aNotification</div><div class="line">{</div><div class="line">    NSArray *receiveArray = [aNotification object];</div><div class="line">    _outputLabel.text = receiveArray[<span class="number">0</span>];</div><div class="line">}</div></pre></td></tr></table></figure>

<p><img src="http://www.myexception.cn/img/2013/09/21/141350223.jpg" alt=""></p>
<h2 id="Block">Block</h2>
<p>什么是Block：从C的声明符到Objective-C的Blocks语法块代码以闭包得形式将各种内容进行传递，可以是代码，可以是数组无所不能。块代码十分方便将不同地方的代码集中统一，使其易读性增强。</p>
<p>来看这里怎么进行数组传递。<br>typedef void (^Arr_Block)(NSArray *array);</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)showArrayUsingBlock:(Arr_Block)block</div><div class="line">{</div><div class="line">    NSDictionary *dict = @{@<span class="string">"array"</span>: @[@<span class="string">"Chelsea"</span>, @<span class="string">"MUFC"</span>, @<span class="string">"Real Madrid"</span>]};</div><div class="line">    NSArray *<span class="built_in">array</span> = dict[@<span class="string">"array"</span>];</div><div class="line">    block(<span class="built_in">array</span>);</div><div class="line">}</div></pre></td></tr></table></figure>

<p>调用方法，显示</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">- (IBAction)blockCallBack</div><div class="line">{</div><div class="line">    [self showArrayUsingBlock:^(NSArray *<span class="built_in">array</span>) {</div><div class="line">        _outputLabel.text = <span class="built_in">array</span>[<span class="number">1</span>];</div><div class="line">    }];</div><div class="line">}</div></pre></td></tr></table></figure>

<p><img src="http://www.myexception.cn/img/2013/09/21/141350224.jpg" alt=""></p>
<p>三种模式都很轻松~</p>
<p>本文转自:<a href="http://www.myexception.cn/operating-system/1407402.html" target="_blank" rel="external">http://www.myexception.cn/operating-system/1407402.html</a></p>

      
    </div>
    <footer>
      
  
  <div class="categories">
    <a href="/categories/iOS应用开发之常用方法/">iOS应用开发之常用方法</a>
  </div>

      
  
  <div class="tags">
    <a href="/tags/block/">block</a>
  </div>

      
        
          <div class="alignright share-box">
  
</div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
      
        <div class="icon"></div>
        <time datetime="2014-02-13T05:54:00.000Z"><a href="/2014/02/13/IOS开发-在应用内打开AppStore/">2月 13 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/02/13/IOS开发-在应用内打开AppStore/">IOS开发-在应用内打开AppStore</a></h1>
  

      
    </header>
    <div class="entry">
      
        
        <ol>
<li><p>首先需要添加StoreKit.framework</p>
</li>
<li><p>头文件导入<storekit storekit.h=""></storekit></p>
</li>
<li>弹出界面</li>
</ol>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">SKStoreProductViewController *storeProductViewController = [[SKStoreProductViewController alloc] init];</div><div class="line"><span class="comment">// Configure View Controller</span></div><div class="line">[storeProductViewController setDelegate:<span class="keyword">self</span>];</div><div class="line">[storeProductViewController loadProductWithParameters:@{SKStoreProductParameterITunesItemIdentifier :<span class="string">@"414478124"</span>} completionBlock:<span class="literal">nil</span>];</div><div class="line">[<span class="keyword">self</span> presentViewController:storeProductViewController animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</div></pre></td></tr></table></figure>

<ol>
<li>设置代理 </li>
</ol>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)productViewControllerDidFinish:(SKStoreProductViewController *)viewController</div><div class="line">{</div><div class="line">    [<span class="keyword">self</span> dismissViewControllerAnimated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</div><div class="line">}</div></pre></td></tr></table></figure>


      
    </div>
    <footer>
      
  
  <div class="categories">
    <a href="/categories/iOS应用开发之常用方法/">iOS应用开发之常用方法</a>
  </div>

      
  
  <div class="tags">
    <a href="/tags/打开AppStore/">打开AppStore</a>
  </div>

      
        
          <div class="alignright share-box">
  
</div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
      
        <div class="icon"></div>
        <time datetime="2014-01-08T05:09:00.000Z"><a href="/2014/01/08/IOS开发之Block 编程（翻译官方文档）/">1月 8 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/01/08/IOS开发之Block 编程（翻译官方文档）/">IOS开发之Block 编程（翻译官方文档）</a></h1>
  

      
    </header>
    <div class="entry">
      
        
        <p>本文转自：<a href="http://blog.csdn.net/perfect_promise/article/details/7757746" target="_blank" rel="external">http://blog.csdn.net/perfect_promise/article/details/7757746</a></p>
<p>注：小弟才疏学浅，英文水平够烂，若有不正确或误导的地方，请大家指出，欢迎大家指正和修改。本文中涉及的词法范围：作用范围，例如if{}else{}，两个{}分别是if和else的作用范围。#<a href=""></a>介绍<br>Block对象是一个C级别的语法和运行机制。它与标准的C函数类似，不同之处在于，它除了有可执行代码以外，它还包含了与堆、栈内存绑定的变量。因此，Block对象包含着一组状态数据，这些数据在程序执行时用于对行为产生影响。</p>
<p>你可以用Block来写一些可以传到API中的函数语句，可选择性地存储，并可以使用多线程。作为一个回调，Block特别的有用，因为block既包含了回调期间的代码，又包含了执行期间需要的数据。<br>作为Mac OS X v10.6 Xcode开发工具附带的工具，Block在GCC和Clang中同样可用。你能在Mac OS X v10.6 及其以上版本和iOS 4.0及其以上版本中使用Block。.Block的运行是开源的，因此你能在<a href="http://llvm.org/svn/llvm-project/compiler-rt/trunk/" target="_blank" rel="external">LLVM’s<br> compiler-rt subproject repository</a>里面找到它。Block也已经被提交到C标准工作组作为 <a href="http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1370.pdf" target="_blank" rel="external">N1370:<br> Apple’s Extensions to C</a>。 由于Objective-C 和 C++ 都是衍生自 C，block被设计为可同时兼容这三种语言。<br>你应该阅读这篇文档，去学习Block是什么，以及在C、C++和OC中如何使用Block使你的程序更加的高效和更易于维护。</p>
<h2 id="声明和使用Block"><a href=""></a>声明和使用Block</h2>
<p>用^操作符来声明一个Block变量，并指明Block述句的开始。Block的主体部分包含在 <code>{}内，像下面的例子中一样（与C语法一样，“；”指明语句的结束）：</code><br>    int multiplier = 7;<br>    int (^myBlock)(int) = ^(int num) {<br>        return num <em> multiplier;<br>    };<br><img src="http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Blocks/Art/blocks.jpg" alt="image: ../Art/blocks.jpg">注意：Block可以使用定义范围之内的任何变量。<br>如果你把Block声明为一个变量，你以后就可以像调用一个方法一样使用它：<br>    int multiplier = 7;<br>    int (^myBlock)(int) = ^(int num) {<br>        return num </em> multiplier;<br>    };</p>
<pre><code><span class="keyword">printf</span>(<span class="string">"<span class="variable">%d</span>"</span>, myBlock(<span class="number">3</span>));
<span class="regexp">//</span> prints <span class="string">"21"</span>
</code></pre><h1 id="直接使用Block"><a href=""></a>直接使用Block</h1>
<p>很多情况下，你不需要声明Block变量；你只是简单地写一个Block语句内联在需要使用它作为参数的地方。下面的例子使用了 <code>qsort_b方法，</code>qsort_b方法与标准的qsort_r类似，只是用Block作为它的最后一个参数。``<br>    char *myCharacters[3] = { “TomJohn”, “George”, “Charles Condomine” };</p>
<pre><code>qsort_b(myCharacters, 3, sizeof(char <span class="keyword">*</span>), ^(const void <span class="keyword">*</span>l, const void <span class="keyword">*</span>r) {
    char <span class="keyword">*</span>left = <span class="keyword">*</span>(char <span class="keyword">*</span><span class="keyword">*</span>)l;
    char <span class="keyword">*</span>right = <span class="keyword">*</span>(char <span class="keyword">*</span><span class="keyword">*</span>)r;
    return strncmp(left, right, 1);
});

// myCharacters is now { <span class="string">"Charles Condomine"</span>, <span class="string">"George"</span>, <span class="string">"TomJohn"</span> }
</code></pre><h1 id="Cocoa_Block"><a href=""></a>Cocoa Block</h1>
<p>Cocoa框架中有几个方法使用Block作为参数，通常是在执行对象的操作集合，或者操作完成后使用它作为回调。下面的例子向我们展示了<br><code>在NSArray</code> 对象的方法<code>[sortedArrayUsingComparator:怎样使用Block](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/sortedArrayUsingComparator:)</code>.。这个方法只有单一的参数，block被定义为<code>[NSComparator](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/c/tdef/NSComparator)</code> 局部变量：<br>    NSArray *stringsArray = [NSArray arrayWithObjects:<br>                                     @”string 1”,<br>                                     @”String 21”,<br>                                     @”string 12”,<br>                                     @”String 11”,<br>                                     @”String 02”, nil];</p>
<pre><code>static NSStringCompareOptions comparisonOptions = NSCaseInsensitiveSearch | NSNumericSearch |
        NSWidthInsensitiveSearch | NSForcedOrderingSearch;
NSLocale *currentLocale = [NSLocale currentLocale];

NSComparator finderSortBlock = ^(<span class="property">id</span> string1, <span class="property">id</span> string2) {

    NSRange string1Range = NSMakeRange(<span class="number">0</span>, [string1 <span class="property">length</span>]);
<span class="command">    return</span> [string1 compare:string2 options:comparisonOptions range:string1Range locale:currentLocale];
};

NSArray *finderSortArray = [stringsArray sortedArrayUsingComparator:finderSortBlock];
NSLog(@<span class="string">"finderSortArray: %@"</span>, finderSortArray);

/*
Output:
finderSortArray: (
    <span class="string">"string 1"</span>,
    <span class="string">"String 02"</span>,
    <span class="string">"String 11"</span>,
    <span class="string">"string 12"</span>,
    <span class="string">"String 21"</span>
)
*/
</code></pre><h2 id="_block变量"><a href=""></a>_block变量</h2>
<p>Block的一个强大的特性是，它能在相同的词法范围内修改变量值。Block能修改变量是通过_block存储类型标示符。与 <a href="http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Blocks/Articles/bxGettingStarted.html#//apple_ref/doc/uid/TP40007502-CH7-SW4" target="_blank" rel="external">“Cocoa<br> Block”</a> 中的例子一样，你能使用一个block变量来计算有多少字符串与下面例子中是相同的。 Block直接被用，并且用 <code>currentLocale作为一个只读变量在block中。</code><br>    NSArray *stringsArray = [NSArray arrayWithObjects:<br>                             @”string 1”,<br>                             @”String 21”, // &lt;-<br>                             @”string 12”,<br>                             @”String 11”,<br>                             @”Strîng 21”, // &lt;-<br>                             @”Striñg 21”, // &lt;-<br>                             @”String 02”, nil];</p>
<pre><code>NSLocale *currentLocale = [NSLocale currentLocale];
__block NSUInteger orderedSameCount = <span class="number">0</span>;

NSArray *diacriticInsensitiveSortArray = [stringsArray sortedArrayUsingComparator:^(<span class="property">id</span> string1, <span class="property">id</span> string2) {

    NSRange string1Range = NSMakeRange(<span class="number">0</span>, [string1 <span class="property">length</span>]);
    NSComparisonResult comparisonResult = [string1 compare:string2 options:NSDiacriticInsensitiveSearch range:string1Range locale:currentLocale];

    <span class="keyword">if</span> (comparisonResult == NSOrderedSame) {
        orderedSameCount++;
    }
<span class="command">    return</span> comparisonResult;
}];

NSLog(@<span class="string">"diacriticInsensitiveSortArray: %@"</span>, diacriticInsensitiveSortArray);
NSLog(@<span class="string">"orderedSameCount: %d"</span>, orderedSameCount);

/*
Output:

diacriticInsensitiveSortArray: (
    <span class="string">"String 02"</span>,
    <span class="string">"string 1"</span>,
    <span class="string">"String 11"</span>,
    <span class="string">"string 12"</span>,
    <span class="string">"String 21"</span>,
    <span class="string">"Str\U00eeng 21"</span>,
    <span class="string">"Stri\U00f1g 21"</span>
)
orderedSameCount: <span class="number">2</span>
*/
</code></pre><p>更详细的内容请查看 <a href="http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW1" target="_blank" rel="external">“Blocks<br> 和变量.”</a></p>
<h1 id="Block功能"><a href=""></a>Block功能</h1>
<p>Block是一个匿名的内嵌代码集：</p>
<ul>
<li><p>与方法一样，有一个类型参数列表</p>
</li>
<li><p>有一个隐形或声明的返回类型</p>
</li>
<li><p>能从它定义的词法范围内获取状态</p>
</li>
<li><p>能有选择性地修改词法范围中的状态</p>
</li>
<li><p>能共享相同词法范围内其他块定义的修改的潜在性</p>
</li>
<li><p>词法范围被销毁后仍能继续在已定义的词法范围内共享和修改状态</p>
</li>
</ul>
<p>你能复制一个block，并把它传递给其他线程来延迟执行（或者，在它自己的线程内，做一个运行环）。编译和运行过程中，从block中引用的所有变量都保留乐一份block的副本。block不仅适用于纯 C 和 C++，同时block也是一个Objective-C 对象。</p>
<h1 id="用法"><a href=""></a>用法</h1>
<p>Blocks通常表示比较小的，独立的代码段。因此，它特别适用于可能被同时执行的封装单元工作的模式，或者是集合中的项目，或者是当另一个操作完成后的一个回调。<br>Blocks之所以能替代传统的回调方法主要有以下两个理由：</p>
<ol>
<li><p>它允许你在调用点写代码，调用点稍后会在方法实现段被执行。<br>Blocks通常也是框架方法中的参数。</p>
</li>
<li><p>它允许访问局部变量。<br>与其使用回调，需要一个包含所有上下文信息的数据结构，你只需要执行一个操作，直接访问局部变量即可。</p>
</li>
</ol>
<h1 id="声明block参考"><a href=""></a>声明block参考</h1>
<p>Block变量持有Block引用。 声明它的语法与在函数中声明指针类似，用 <code>^代替</code> <code>*。</code> 其余部分，与C类型系统，具有完全的互操作性。以下时所有有效块的变量声明：<br>    void (^blockReturningVoidWithVoidArgument)(void);<br>    int (^blockReturningIntWithIntAndCharArguments)(int, char);<br>    void (^arrayOfTenBlocksReturningVoidWithIntArgument[10])(int);<br>Block支持可变参数 (<code>...</code>)参数。 不带任何参数的block，在参数列表中必须指定为void。Block的设计考虑到类型安全，通过提供给编译器全套的元数据来验证block的使用、传递参数到block中和返回值分配。一个块引用可以转换到任意类型的指针，反之亦然。但是，你不能通过*来获得block的值，因而在编译时，block的大小也不能被计算出来。<br>你可以创建一个block类型，当你在多个地方使用到同一个签名的block时，这种方式时很好的。<br>    typedef float (^MyBlockType)(float, float);</p>
<pre><code>MyBlockType myFirstBlock = // <span class="keyword">...</span> ;
MyBlockType mySecondBlock = // <span class="keyword">...</span> ;
</code></pre><h1 id="创建block"><a href=""></a>创建block</h1>
<p>用^指明block语句的开始。在它后面的（）是参数列表。block的主体部分在{ }里面.。下面的例子定义了一个简单的block，并把先前定义的变量（oneForm）分配给它。<br>    int (^oneFrom)(int);</p>
<pre><code>oneFrom = ^(<span class="keyword">int</span> anInt) {
    <span class="keyword">return</span> anInt - <span class="number">1</span>;
};
</code></pre><p>如果你不显式声明块表达式的返回值，它可以根据block的内容进行自动匹配。如果返回类型和参数列表都是void，你也可以省略参数列表。 如果存在多个返回语句，应该正确的进行匹配(又需要的话，可以使用类型转换)。</p>
<h1 id="全局block"><a href=""></a>全局block</h1>
<p>在文件级别，你可以使用block作为一个全局表达式。</p>
<pre><code><span class="preprocessor">#import &lt;stdio.h&gt;</span>

<span class="keyword">int</span> GlobalInt = <span class="number">0</span>;
<span class="keyword">int</span> (^getGlobalInt)(<span class="keyword">void</span>) = ^{ <span class="keyword">return</span> GlobalInt; };
</code></pre><h1 id="变量类型"><a href=""></a>变量类型</h1>
<p>block对象的代码中，变量被看成五种不同的方式。<br>与函数一样，block支持三种标准类型的变量：</p>
<ul>
<li><p>全局变量，带有static修饰符的变量</p>
</li>
<li><p>全局函数（不是专门的变量）</p>
</li>
<li><p>局部变量和参数</p>
</li>
</ul>
<p>Blocks也支持其他两种变量类型：</p>
<ol>
<li><p>函数级别的_block变量。如有引用块被复制到堆，block中的_block变量是可变的。</p>
</li>
<li><p><code>const</code></p>
</li>
</ol>
<p>最后，在一个方法的实现，块可能引用的Objective-C的实例变量—参考<a href="http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW3" target="_blank" rel="external">“Object<br> and Block Variables.”</a><br>以下是在block中使用变量的规则：</p>
<ol>
<li><p>可以访问全局变量，包括词法范围内存在的static变量。</p>
</li>
<li><p>可以传参给block，与传参给函数的方式是一样的。</p>
</li>
<li><p>局部词法范围内的堆栈变量被看成时const变量。<br>他们的值存放在程序内的block语句中。 在嵌套block中，他们的值来自于最近的词法范围内。</p>
</li>
<li><p>声明为_block类型的<br>局部词法范围内的变量是可改变的。更改的适用范围仅为局部词法范围，包括词法范围内定义的其他block。 在<a href="http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW6" target="_blank" rel="external">“The<br>__block Storage Type.”</a>中有更详细的描述。</p>
</li>
<li>block作用范围内声明的局部变量，与函数中的局部变量一样。<br>block的每一次调用，都重新生成此变量的新的副本。这些变量可以被转换为const或引用变量在块内的作用域。</li>
</ol>
<p>下面的例子说明了局部非静态变量的使用：</p>
<pre><code><span class="keyword">int</span> <span class="keyword">x</span> = <span class="number">123</span>;

void (^printXAndY)(<span class="keyword">int</span>) = ^(<span class="keyword">int</span> <span class="keyword">y</span>) {

    <span class="keyword">printf</span>(<span class="string">"<span class="variable">%d</span> <span class="variable">%d</span>\n"</span>, <span class="keyword">x</span>, <span class="keyword">y</span>);
};

printXAndY(<span class="number">456</span>); <span class="regexp">//</span> prints: <span class="number">123</span> <span class="number">456</span>
</code></pre><p>如上所述，在block内试图分配一个新的x的值将会报错：<br>    int x = 123;</p>
<pre><code>void (^printXAndY)(<span class="keyword">int</span>) = ^(<span class="keyword">int</span> <span class="keyword">y</span>) {

    <span class="keyword">x</span> = <span class="keyword">x</span> + <span class="keyword">y</span>; <span class="regexp">//</span> error
    <span class="keyword">printf</span>(<span class="string">"<span class="variable">%d</span> <span class="variable">%d</span>\n"</span>, <span class="keyword">x</span>, <span class="keyword">y</span>);
};
</code></pre><p>为了使一个变量在block内部可以被修改，你应该使用_block来修饰这个变量—参考 <a href="http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW6" target="_blank" rel="external">“The<br> __block Storage Type.”</a></p>
<h1 id="_block存储类型"><a href=""></a>_block存储类型</h1>
<p>在变量前面加上_block类型修饰符，我们可以指定传进来的变量是可变或者可读写的。_block存储与它类似，但是局部变量的寄存器、auto变量和static存储类型之间相互排斥。<br><code>_block变量共享变量之间的作用域和块之间的作用域拷贝变量存储范围内。因此，如果block中定义的所有拷贝在框架内的生存超越帧结束（例如，正在排队等待执行），堆栈帧被破坏后存储也将继续存在</code>。在一个给定的词法范围的多个块，可以同时使用共享变量。<br>作为优化，在堆栈上的块存储块启动就像自身调用一样。如果块被复制，使用Block_copy（或在Objective-C中块发送一个副本），变量将被复制到堆。因此，_block块的地址可以随时更改。<br>_block变量有两个进一步的限制：他们不能是可变数组，不能包含C99的可变长数组的结构。<br>下面的例子说明了_block变量的作用：<br>    __block int x = 123; //  x lives in block storage</p>
<pre><code><span class="keyword">void</span> (^printXAndY)(<span class="keyword">int</span>) = ^(<span class="keyword">int</span> y) {

    x = x + y;
    <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, x, y);
};
printXAndY(<span class="number">456</span>); <span class="comment">// prints: 579 456</span>
<span class="comment">// x is now 579</span>
</code></pre><p>下面的例子显示了几种类型的变量块的相互作用：<br>    extern NSInteger CounterGlobal;<br>    static NSInteger CounterStatic;</p>
<pre><code>{
    <span class="built_in">NSInteger</span> localCounter = <span class="number">42</span>;
    __block <span class="keyword">char</span> localCharacter;

    <span class="keyword">void</span> (^aBlock)(<span class="keyword">void</span>) = ^(<span class="keyword">void</span>) {
        ++CounterGlobal;
        ++CounterStatic;
        CounterGlobal = localCounter; <span class="comment">// localCounter fixed at block creation</span>
        localCharacter = <span class="string">'a'</span>; <span class="comment">// sets localCharacter in enclosing scope</span>
    };

    ++localCounter; <span class="comment">// unseen by the block</span>
    localCharacter = <span class="string">'b'</span>;

    aBlock(); <span class="comment">// execute the block</span>
    <span class="comment">// localCharacter now 'a'</span>
}
</code></pre><h1 id="对象和block变量"><a href=""></a>对象和block变量</h1>
<p>Block提供支持的Objective-C和C+ +的对象，和其他块，作为变量。</p>
<h3 id="Objective-C_对象"><a href=""></a>Objective-C 对象</h3>
<p>在手动引用计数的环境， 复制块时，块内使用局部变量保留。Block内使用的局部变量引用技术将retain。如果您想覆盖一个特定对象变量的这种行为，你可以标记_block修饰符来修饰该变量。<br>如果您使用ARC，当block被copy时对象变量被保留，并自动释放，和延迟释放。<br><a href="&quot;Note&quot;"></a><strong>注：在垃圾收集的环境，如果你给变量同时使用_weak和_block修饰符，那么该block将无法确保是否还存在。</strong></p>
<p>如果你在执行方法内使用block，实例变量对象的内存管理规则更加微妙：</p>
<ul>
<li><p>如果您访问实例变量的参照，对象retain；</p>
</li>
<li><p>如果您访问实例变量的值，对象retain；</p>
</li>
</ul>
<p>下面的例子说明了两种不同的情况：<br>    dispatch_async(queue, ^{<br>        // instanceVariable is used by reference, self is retained<br>        doSomethingWithObject(instanceVariable);<br>    });</p>
<pre><code>id localVariable = instanceVariable;
dispatch_async(queue, ^{
    <span class="regexp">//</span> localVariable <span class="keyword">is</span> used <span class="keyword">by</span> value, localVariable <span class="keyword">is</span> retained (<span class="keyword">not</span> self)
    doSomethingWithObject(localVariable);
});
</code></pre><h1 id="调用block"><a href=""></a>调用block</h1>
<p>如果你声明block作为一个变量，你可以像使用函数一样使用它，就像下面两个示例所示一样：<br>    int (^oneFrom)(int) = ^(int anInt) {<br>        return anInt - 1;<br>    };</p>
<pre><code><span class="built_in">printf</span>(<span class="string">"1 from 10 is %d"</span>, oneFrom(<span class="number">10</span>));
<span class="comment">// Prints "1 from 10 is 9"</span>

<span class="keyword">float</span> (^distanceTraveled) (<span class="keyword">float</span>, <span class="keyword">float</span>, <span class="keyword">float</span>) =
                          ^(<span class="keyword">float</span> startingSpeed, <span class="keyword">float</span> acceleration, <span class="keyword">float</span> time) {

    <span class="keyword">float</span> <span class="built_in">distance</span> = (startingSpeed * time) + (<span class="number">0.5</span> * acceleration * time * time);
    <span class="keyword">return</span> <span class="built_in">distance</span>;
};

<span class="keyword">float</span> howFar = distanceTraveled(<span class="number">0.0</span>, <span class="number">9.8</span>, <span class="number">1.0</span>);
<span class="comment">// howFar = 4.9</span>
</code></pre><p>然而，通常情况下，你使用block作为一个函数或方法的参数，在这些情况下，你通常创建一个块“内联”。</p>
<h1 id="使用block作为函数参数"><a href=""></a>使用block作为函数参数</h1>
<p>可以把block作为函数参数进行传递，就像其他参数一样。然后，很多时候你不需要声明block；而你只需把他们内联到需要使用block作为一个参数的地方。下面的例子使用了 <code>qsort_b方法，</code>qsort_b方法与标准的qsort_r类似，只是用Block作为它的最后一个参数。``<br>    char *myCharacters[3] = { “TomJohn”, “George”, “Charles Condomine” };</p>
<pre><code>qsort_b(myCharacters, 3, sizeof(char <span class="keyword">*</span>), ^(const void <span class="keyword">*</span>l, const void <span class="keyword">*</span>r) {
    char <span class="keyword">*</span>left = <span class="keyword">*</span>(char <span class="keyword">*</span><span class="keyword">*</span>)l;
    char <span class="keyword">*</span>right = <span class="keyword">*</span>(char <span class="keyword">*</span><span class="keyword">*</span>)r;
    return strncmp(left, right, 1);
});
// Block implementation ends at <span class="string">"}"</span>

// myCharacters is now { <span class="string">"Charles Condomine"</span>, <span class="string">"George"</span>, <span class="string">"TomJohn"</span> }
</code></pre><p>请注意，该块包含在函数的参数列表。<br>下面的示例显示如何使用block的dispatch_apply函数。 <code>dispatch_apply``使用以下方式进行定义：</code><br>    void dispatch_apply(size_t iterations, dispatch_queue_t queue, void (^block)(size_t));<br>功能是提交一个block到一个调度队列进行多次调用。它携带了三个参数；第一个参数指定执行的迭代的数量；第二个参数指定block被提交到哪个队列； 点歌参数就是block自身，反过来这需要一个参数迭代的当前索引。<br>可以使用<code>dispatch_apply</code> 分别打印出迭代索引，如下所示：</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> &lt;dispatch/dispatch.h&gt;</span>
size_t count = <span class="number">10</span>;
dispatch_queue_t <span class="built_in">queue</span> = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);

dispatch_apply(count, <span class="built_in">queue</span>, ^(size_t i) {
    <span class="built_in">printf</span>(<span class="string">"%u\n"</span>, i);
});
</code></pre><h1 id="使用block作为方法参数"><a href=""></a>使用block作为方法参数</h1>
<p><a href="">Cocoa提供了一种方法，使用blocks。传递block作为参数与传递其他参数的方式是一样的。</a><br>下面的示例，确定一个数组前五个元素中任意一个在过滤集中的索引数。<br>    NSArray <em>array = [NSArray arrayWithObjects: @”A”, @”B”, @”C”, @”A”, @”B”, @”Z”,@”G”, @”are”, @”Q”, nil];<br>    NSSet </em>filterSet = [NSSet setWithObjects: @”A”, @”Z”, @”Q”, nil];</p>
<pre><code><span class="built_in">BOOL</span> (^test)(<span class="keyword">id</span> obj, NSUInteger idx, <span class="built_in">BOOL</span> *stop);

test = ^ (<span class="keyword">id</span> obj, NSUInteger idx, <span class="built_in">BOOL</span> *stop) {

    <span class="keyword">if</span> (idx &lt; <span class="number">5</span>) {
        <span class="keyword">if</span> ([filterSet containsObject: obj]) {
            <span class="keyword">return</span> <span class="literal">YES</span>;
        }
    }
    <span class="keyword">return</span> <span class="literal">NO</span>;
};

<span class="built_in">NSIndexSet</span> *indexes = [array indexesOfObjectsPassingTest:test];

<span class="built_in">NSLog</span>(<span class="string">@"indexes: %@"</span>, indexes);

<span class="comment">/*
Output:
indexes: &lt;NSIndexSet: 0x10236f0&gt;[number of indexes: 2 (in 2 ranges), indexes: (0 3)]
*/</span>
</code></pre><p>下方的例子是确定一个NSSet对象中是否包含有局部变量指定的一个单词，如果包含的话，设置另一个局部变量的值为YES。found也被声明为一个_block变量， 这个block是定义联：<br>    __block BOOL found = NO;<br>    NSSet <em>aSet = [NSSet setWithObjects: @”Alpha”, @”Beta”, @”Gamma”, @”X”, nil];<br>    NSString </em>string = @”gamma”;</p>
<pre><code>[aSet enumerateObjectsUsingBlock:^(<span class="keyword">id</span> obj, <span class="built_in">BOOL</span> *stop) {
    <span class="keyword">if</span> ([obj localizedCaseInsensitiveCompare:string] == NSOrderedSame) {
        *stop = <span class="literal">YES</span>;
        found = <span class="literal">YES</span>;
    }
}];

<span class="comment">// At this point, found == YES</span>
</code></pre><h1 id="复制block"><a href=""></a>复制block</h1>
<p>通常情况下，你不需要复制（或保留）一个块。如果你想要block在它的定义域被销毁后仍可以被使用，你仅仅只需要创建一个副本。复制移动block到堆中。.<br>你能用C函数来复制和释放block：<br>    Block_copy();<br>    Block_release();<br>如果你使用Objective-C，block的属性可以使用copy、retain、release和autorelease。<br>为了避免产生内存泄露，block的copy和retain的使用必须平衡。使用了copy和retain的地方必须进行release（autorelease除外）——除非在一个垃圾收集环境。</p>
<h1 id="避免的模式"><a href=""></a>避免的模式</h1>
<p>块文本（即，^{…}）是一个堆栈的本地数据结构的地址块。因此堆栈的本地数据结构的范围是封闭的复合语句，所以你应该避免使用下例中的模式：,<br>    void dontDoThis() {<br>        void (^blockArray[3])(void);  // an array of 3 block references</p>
<pre><code>    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i) {
        blockArray[i] = ^{ printf(<span class="string">"hello, %d\n"</span>, i); };
        // <span class="type">WRONG</span>: <span class="type">The</span> <span class="keyword">block</span> literal scope <span class="keyword">is</span> the <span class="string">"for"</span> loop
    }
}

<span class="type">void</span> dontDoThisEither() {
    <span class="type">void</span> (^<span class="keyword">block</span>)(<span class="type">void</span>);

    <span class="type">int</span> i = random():
    <span class="keyword">if</span> (i &gt; <span class="number">1000</span>) {
        <span class="keyword">block</span> = ^{ printf(<span class="string">"got i at: %d\n"</span>, i); };
        // <span class="type">WRONG</span>: <span class="type">The</span> <span class="keyword">block</span> literal scope <span class="keyword">is</span> the <span class="string">"then"</span> clause
    }
    // ...
}
</code></pre><h1 id="调试"><a href=""></a>调试</h1>
<p>在block中你可以设置断点进行单步调试。你可以从调用块内GDB会议调用一个block，如下例所示：<br>    $ invoke-block myBlock 10 20<br>如果你想传一个C字符串值，你必须使用引用。例如， 把这个字符串传到<code>doSomethingWithString</code> block中，你可以像下面这样写：<br>    $ invoke-block doSomethingWithString “\”this string\””</p>

      
    </div>
    <footer>
      
  
  <div class="categories">
    <a href="/categories/iOS应用开发之常用方法/">iOS应用开发之常用方法</a>
  </div>

      
  
  <div class="tags">
    <a href="/tags/iphone开发/">iphone开发</a>, <a href="/tags/ios开发/">ios开发</a>, <a href="/tags/ios/">ios</a>
  </div>

      
        
          <div class="alignright share-box">
  
</div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
      
        <div class="icon"></div>
        <time datetime="2013-12-30T08:02:00.000Z"><a href="/2013/12/30/iPhone之调用系统提示音教程/">12月 30 2013</a></time>
      
      
  
    <h1 class="title"><a href="/2013/12/30/iPhone之调用系统提示音教程/">iPhone之调用系统提示音教程</a></h1>
  

      
    </header>
    <div class="entry">
      
        
        <p>本文转自：<a href="http://www.1000phone.net/thread-8587-1-1.html" target="_blank" rel="external">http://www.1000phone.net/thread-8587-1-1.html</a></p>
<p>首先要在工程里加入Audio Toolbox framework这个库，然后在需要调用的文件里#import <audiotoolbox audiotoolbox.h=""><br>最后在需要播放提示音的地方写上<br>AudioServicesPlaySystemSound(1106);<br>注：括号中为系统声音的id，详见最下面的列表。<br>为了方便大家测试系统声音，我写了一个demo供大家使用下载。<br>另外，如果想用自己的音频文件创建系统声音来播放的同学可以参考如下代码。</audiotoolbox></p>
<ol>
<li><p>//Get the filename of the sound file:</p>
</li>
<li><p>NSString *path = [NSString stringWithFormat:@”%@%@”, [[NSBundle mainBundle] resourcePath], @”/jad0007a.wav”];</p>
</li>
<li><p>//declare a system sound</p>
</li>
<li><p>id SystemSoundID soundID;</p>
</li>
<li><p>//Get a URL for the sound file</p>
</li>
<li><p>NSURL *filePath = [NSURL fileURLWithPath:path isDirectory:NO];</p>
</li>
<li><p>//Use audio sevices to create the sound</p>
</li>
<li><p>AudioServicesCreateSystemSoundID((CFURLRef)filePath, &amp;soundID);</p>
</li>
<li><p>//Use audio services to play the sound</p>
</li>
<li><p>AudioServicesPlaySystemSound(soundID);</p>
</li>
</ol>
<p>复制代码<br>提示音列表：</p>
<p>Sound ID   <a href="http://iphonedevwiki.net/index.php/AudioServices#" target="_blank" rel="external"><img src="http://iphonedevwiki.net/skins/common/images/sort_none.gif" alt=""></a>File name (iPhone)   <a href="http://iphonedevwiki.net/index.php/AudioServices#" target="_blank" rel="external"><img src="http://iphonedevwiki.net/skins/common/images/sort_none.gif" alt=""></a>File name (iPod Touch)   <a href="http://iphonedevwiki.net/index.php/AudioServices#" target="_blank" rel="external"><img src="http://iphonedevwiki.net/skins/common/images/sort_none.gif" alt=""></a>Category   <a href="http://iphonedevwiki.net/index.php/AudioServices#" target="_blank" rel="external"><img src="http://iphonedevwiki.net/skins/common/images/sort_none.gif" alt=""></a>Note   <a href="http://iphonedevwiki.net/index.php/AudioServices#" target="_blank" rel="external"><img src="http://iphonedevwiki.net/skins/common/images/sort_none.gif" alt=""></a>1000new-mail.cafnew-mail.cafMailReceived<br>1001mail-sent.cafmail-sent.cafMailSent<br>1002Voicemail.cafVoicemail.cafVoicemailReceived<br>1003ReceivedMessage.cafReceivedMessage.cafSMSReceived<br>1004SentMessage.cafSentMessage.cafSMSSent<br>1005alarm.cafsq_alarm.cafCalendarAlert<br>1006low_power.caflow_power.cafLowPower<br>1007sms-received1.cafsms-received1.cafSMSReceived_Alert<br>1008sms-received2.cafsms-received2.cafSMSReceived_Alert<br>1009sms-received3.cafsms-received3.cafSMSReceived_Alert<br>1010sms-received4.cafsms-received4.cafSMSReceived_Alert<br>1011—SMSReceived_Vibrate<br>1012sms-received1.cafsms-received1.cafSMSReceived_Alert<br>1013sms-received5.cafsms-received5.cafSMSReceived_Alert<br>1014sms-received6.cafsms-received6.cafSMSReceived_Alert<br>1015Voicemail.cafVoicemail.caf-Available since 2.11016tweet_sent.caftweet_sent.cafSMSSentAvailable since 5.01020Anticipate.cafAnticipate.cafSMSReceived_AlertAvailable since 4.21021Bloom.cafBloom.cafSMSReceived_AlertAvailable since 4.21022Calypso.cafCalypso.cafSMSReceived_AlertAvailable since 4.21023Choo_Choo.cafChoo_Choo.cafSMSReceived_AlertAvailable since 4.21024Descent.cafDescent.cafSMSReceived_AlertAvailable since 4.21025Fanfare.cafFanfare.cafSMSReceived_AlertAvailable since 4.21026Ladder.cafLadder.cafSMSReceived_AlertAvailable since 4.21027Minuet.cafMinuet.cafSMSReceived_AlertAvailable since 4.21028News_Flash.cafNews_Flash.cafSMSReceived_AlertAvailable since 4.21029Noir.cafNoir.cafSMSReceived_AlertAvailable since 4.21030Sherwood_Forest.cafSherwood_Forest.cafSMSReceived_AlertAvailable since 4.21031Spell.cafSpell.cafSMSReceived_AlertAvailable since 4.21032Suspense.cafSuspense.cafSMSReceived_AlertAvailable since 4.21033Telegraph.cafTelegraph.cafSMSReceived_AlertAvailable since 4.21034Tiptoes.cafTiptoes.cafSMSReceived_AlertAvailable since 4.21035Typewriters.cafTypewriters.cafSMSReceived_AlertAvailable since 4.21036Update.cafUpdate.cafSMSReceived_AlertAvailable since 4.21050ussd.cafussd.cafUSSDAlert<br>1051SIMToolkitCallDropped.cafSIMToolkitCallDropped.cafSIMToolkitTone<br>1052SIMToolkitGeneralBeep.cafSIMToolkitGeneralBeep.cafSIMToolkitTone<br>1053SIMToolkitNegativeACK.cafSIMToolkitNegativeACK.cafSIMToolkitTone<br>1054SIMToolkitPositiveACK.cafSIMToolkitPositiveACK.cafSIMToolkitTone<br>1055SIMToolkitSMS.cafSIMToolkitSMS.cafSIMToolkitTone<br>1057Tink.cafTink.cafPINKeyPressed<br>1070ct-busy.cafct-busy.cafAudioToneBusyThere was no category for this sound before 4.0.1071ct-congestion.cafct-congestion.cafAudioToneCongestionThere was no category for this sound before 4.0.1072ct-path-ack.cafct-path-ack.cafAudioTonePathAcknowledgeThere was no category for this sound before 4.0.1073ct-error.cafct-error.cafAudioToneErrorThere was no category for this sound before 4.0.1074ct-call-waiting.cafct-call-waiting.cafAudioToneCallWaitingThere was no category for this sound before 4.0.1075ct-keytone2.cafct-keytone2.cafAudioToneKey2There was no category for this sound before 4.0.1100lock.cafsq_lock.cafScreenLocked<br>1101unlock.cafsq_lock.cafScreenUnlocked<br>1102—FailedUnlock<br>1103Tink.cafsq_tock.cafKeyPressed<br>1104Tock.cafsq_tock.cafKeyPressed<br>1105Tock.cafsq_tock.cafKeyPressed<br>1106beep-beep.cafsq_beep-beep.cafConnectedToPower<br>1107RingerChanged.cafRingerChanged.cafRingerSwitchIndication<br>1108photoShutter.cafphotoShutter.cafCameraShutter<br>1109shake.cafshake.cafShakeToShuffleAvailable since 3.01110jbl_begin.cafjbl_begin.cafJBL_BeginAvailable since 3.01111jbl_confirm.cafjbl_confirm.cafJBL_ConfirmAvailable since 3.01112jbl_cancel.cafjbl_cancel.cafJBL_CancelAvailable since 3.01113begin_record.cafbegin_record.cafBeginRecordingAvailable since 3.01114end_record.cafend_record.cafEndRecordingAvailable since 3.01115jbl_ambiguous.cafjbl_ambiguous.cafJBL_AmbiguousAvailable since 3.01116jbl_no_match.cafjbl_no_match.cafJBL_NoMatchAvailable since 3.01117begin_video_record.cafbegin_video_record.cafBeginVideoRecordingAvailable since 3.01118end_video_record.cafend_video_record.cafEndVideoRecordingAvailable since 3.01150vc~invitation-accepted.cafvc~invitation-accepted.cafVCInvitationAcceptedAvailable since 4.01151vc~ringing.cafvc~ringing.cafVCRingingAvailable since 4.01152vc~ended.cafvc~ended.cafVCEndedAvailable since 4.01153ct-call-waiting.cafct-call-waiting.cafVCCallWaitingAvailable since 4.11154vc~ringing.cafvc~ringing.cafVCCallUpgradeAvailable since 4.11200dtmf-0.cafdtmf-0.cafTouchTone<br>1201dtmf-1.cafdtmf-1.cafTouchTone<br>1202dtmf-2.cafdtmf-2.cafTouchTone<br>1203dtmf-3.cafdtmf-3.cafTouchTone<br>1204dtmf-4.cafdtmf-4.cafTouchTone<br>1205dtmf-5.cafdtmf-5.cafTouchTone<br>1206dtmf-6.cafdtmf-6.cafTouchTone<br>1207dtmf-7.cafdtmf-7.cafTouchTone<br>1208dtmf-8.cafdtmf-8.cafTouchTone<br>1209dtmf-9.cafdtmf-9.cafTouchTone<br>1210dtmf-star.cafdtmf-star.cafTouchTone<br>1211dtmf-pound.cafdtmf-pound.cafTouchTone<br>1254long_low_short_high.caflong_low_short_high.cafHeadset_StartCall<br>1255short_double_high.cafshort_double_high.cafHeadset_Redial<br>1256short_low_high.cafshort_low_high.cafHeadset_AnswerCall<br>1257short_double_low.cafshort_double_low.cafHeadset_EndCall<br>1258short_double_low.cafshort_double_low.cafHeadset_CallWaitingActions<br>1259middle_9_short_double_low.cafmiddle_9_short_double_low.cafHeadset_TransitionEnd<br>1300Voicemail.cafVoicemail.cafSystemSoundPreview<br>1301ReceivedMessage.cafReceivedMessage.cafSystemSoundPreview<br>1302new-mail.cafnew-mail.cafSystemSoundPreview<br>1303mail-sent.cafmail-sent.cafSystemSoundPreview<br>1304alarm.cafsq_alarm.cafSystemSoundPreview<br>1305lock.cafsq_lock.cafSystemSoundPreview<br>1306Tock.cafsq_tock.cafKeyPressClickPreviewThe category was SystemSoundPreview before 3.2.1307sms-received1.cafsms-received1.cafSMSReceived_Selection<br>1308sms-received2.cafsms-received2.cafSMSReceived_Selection<br>1309sms-received3.cafsms-received3.cafSMSReceived_Selection<br>1310sms-received4.cafsms-received4.cafSMSReceived_Selection<br>1311—SMSReceived_Vibrate<br>1312sms-received1.cafsms-received1.cafSMSReceived_Selection<br>1313sms-received5.cafsms-received5.cafSMSReceived_Selection<br>1314sms-received6.cafsms-received6.cafSMSReceived_Selection<br>1315Voicemail.cafVoicemail.cafSystemSoundPreviewAvailable since 2.11320Anticipate.cafAnticipate.cafSMSReceived_SelectionAvailable since 4.21321Bloom.cafBloom.cafSMSReceived_SelectionAvailable since 4.21322Calypso.cafCalypso.cafSMSReceived_SelectionAvailable since 4.21323Choo_Choo.cafChoo_Choo.cafSMSReceived_SelectionAvailable since 4.21324Descent.cafDescent.cafSMSReceived_SelectionAvailable since 4.21325Fanfare.cafFanfare.cafSMSReceived_SelectionAvailable since 4.21326Ladder.cafLadder.cafSMSReceived_SelectionAvailable since 4.21327Minuet.cafMinuet.cafSMSReceived_SelectionAvailable since 4.21328News_Flash.cafNews_Flash.cafSMSReceived_SelectionAvailable since 4.21329Noir.cafNoir.cafSMSReceived_SelectionAvailable since 4.21330Sherwood_Forest.cafSherwood_Forest.cafSMSReceived_SelectionAvailable since 4.21331Spell.cafSpell.cafSMSReceived_SelectionAvailable since 4.21332Suspense.cafSuspense.cafSMSReceived_SelectionAvailable since 4.21333Telegraph.cafTelegraph.cafSMSReceived_SelectionAvailable since 4.21334Tiptoes.cafTiptoes.cafSMSReceived_SelectionAvailable since 4.21335Typewriters.cafTypewriters.cafSMSReceived_SelectionAvailable since 4.21336Update.cafUpdate.cafSMSReceived_SelectionAvailable since 4.21350—RingerVibeChanged<br>1351—SilentVibeChanged</p>

      
    </div>
    <footer>
      
  
  <div class="categories">
    <a href="/categories/iOS应用开发之常用方法/">iOS应用开发之常用方法</a>
  </div>

      
  
  <div class="tags">
    <a href="/tags/iphone/">iphone</a>, <a href="/tags/iphone开发/">iphone开发</a>, <a href="/tags/ios/">ios</a>, <a href="/tags/ios开发/">ios开发</a>
  </div>

      
        
          <div class="alignright share-box">
  
</div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
      
        <div class="icon"></div>
        <time datetime="2013-11-29T06:41:00.000Z"><a href="/2013/11/29/NSString去掉换行符和空白字符/">11月 29 2013</a></time>
      
      
  
    <h1 class="title"><a href="/2013/11/29/NSString去掉换行符和空白字符/">NSString去掉换行符和空白字符</a></h1>
  

      
    </header>
    <div class="entry">
      
        
        <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSString</span>* headerData=***;</div><div class="line">headerData = [headerData stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];  <span class="comment">//去除掉首尾的空白字符和换行字符</span></div><div class="line">       headerData = [headerData stringByReplacingOccurrencesOfString:<span class="string">@"\r"</span> withString:<span class="string">@""</span>];</div><div class="line">       headerData = [headerData stringByReplacingOccurrencesOfString:<span class="string">@"\n"</span> withString:<span class="string">@""</span>];</div><div class="line">如此即可。</div></pre></td></tr></table></figure>


      
    </div>
    <footer>
      
  
  <div class="categories">
    <a href="/categories/iOS应用开发之常用方法/">iOS应用开发之常用方法</a>
  </div>

      
  
  <div class="tags">
    <a href="/tags/iphone开发/">iphone开发</a>, <a href="/tags/ios开发/">ios开发</a>
  </div>

      
        
          <div class="alignright share-box">
  
</div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
      
        <div class="icon"></div>
        <time datetime="2013-11-25T14:46:00.000Z"><a href="/2013/11/25/URL编码和解码/">11月 25 2013</a></time>
      
      
  
    <h1 class="title"><a href="/2013/11/25/URL编码和解码/">URL编码和解码</a></h1>
  

      
    </header>
    <div class="entry">
      
        
        <p>ios中http请求遇到汉字的时候，需要转化成UTF-8，用到的方法是：<br>NSString <em>encodingString = [urlStringstringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];<br>2.url解码<br>请求后，返回的数据，如何显示的是这样的格式：%3A%2F%2F，此时需要我们进行UTF-8解码，用到的方法是：<br>NSString </em>str =[model.album_namestringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];</p>

      
    </div>
    <footer>
      
  
  <div class="categories">
    <a href="/categories/iOS应用开发之常用方法/">iOS应用开发之常用方法</a>
  </div>

      
  
  <div class="tags">
    <a href="/tags/URL编码/">URL编码</a>
  </div>

      
        
          <div class="alignright share-box">
  
</div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
      
        <div class="icon"></div>
        <time datetime="2013-09-15T04:22:00.000Z"><a href="/2013/09/15/OC对象序列化/">9月 15 2013</a></time>
      
      
  
    <h1 class="title"><a href="/2013/09/15/OC对象序列化/">OC对象序列化</a></h1>
  

      
    </header>
    <div class="entry">
      
        
        <p>本文来自:<a href="http://liuyujie.lofter.com/post/83b14_ff6fb" target="_blank" rel="external">感悟</a></p>
<p>OC可以程序用到的各种对象序<br>列话到文件，在任何需要的情况下，从文件中重新读取数据重新构造对象，下面说一下对象的序列化和反序列化。<br>利用NSKeyedArchiver把对象序列化到文件中：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">//=================NSKeyedArchiver========================   </div><div class="line">NSString *saveStr1 = @"NSKeyedArchiver1";  </div><div class="line">NSString *saveStr2 = @"NSKeyedArchiver2";  </div><div class="line">NSArray *array = [NSArray arrayWithObjects:saveStr1, saveStr2, nil];   </div><div class="line">//—-Save  </div><div class="line">//这一句是将路径和文件名合成文件完整路径  </div><div class="line">NSString *Path = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];   </div><div class="line">NSString *filename = [Path stringByAppendingPathComponent:@"saveDatatest"];  </div><div class="line">[NSKeyedArchiver archiveRootObject:array toFile:filename];</div></pre></td></tr></table></figure>

<p>利用NSKeyedUnarchiver从文件中反序列化成对象：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">array</span> = [NSKeyedUnarchiver unarchiveObjectWithFile: filename];    </div><div class="line">   NSLog(@<span class="string">"&gt;&gt;%@"</span>,<span class="built_in">array</span>);</div></pre></td></tr></table></figure>


      
    </div>
    <footer>
      
  
  <div class="categories">
    <a href="/categories/iOS应用开发之常用方法/">iOS应用开发之常用方法</a>
  </div>

      
  
  <div class="tags">
    <a href="/tags/ios/">ios</a>, <a href="/tags/iphone开发/">iphone开发</a>
  </div>

      
        
          <div class="alignright share-box">
  
</div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  

  <nav id="pagination">
  
    <a href="/categories/iOS应用开发之常用方法/" class="alignleft prev">Prev</a>
  
  
    <a href="/categories/iOS应用开发之常用方法/page/3/" class="alignright next">Next</a>
  
  <div class="clearfix"></div>
</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  
    <form>
      <input id="st-search-input" type="search" placeholder="Search">
    </form>
    <div id="st-results-container"></div>
  
</div>

  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <div class="entry">
    
      <span><a href="/tags/2d/">2d<small>1</small></a></span>
    
      <span><a href="/tags/AFNetworking/">AFNetworking<small>2</small></a></span>
    
      <span><a href="/tags/CoreData/">CoreData<small>2</small></a></span>
    
      <span><a href="/tags/Drawing/">Drawing<small>1</small></a></span>
    
      <span><a href="/tags/MagicalRecord/">MagicalRecord<small>1</small></a></span>
    
      <span><a href="/tags/NSDate/">NSDate<small>1</small></a></span>
    
      <span><a href="/tags/NSString/">NSString<small>1</small></a></span>
    
      <span><a href="/tags/Swift/">Swift<small>9</small></a></span>
    
      <span><a href="/tags/UIAlertView/">UIAlertView<small>1</small></a></span>
    
      <span><a href="/tags/UITabBarController/">UITabBarController<small>1</small></a></span>
    
      <span><a href="/tags/UITableViewControlle/">UITableViewControlle<small>1</small></a></span>
    
      <span><a href="/tags/UIWebView/">UIWebView<small>1</small></a></span>
    
      <span><a href="/tags/URL-Scheme/">URL Scheme<small>1</small></a></span>
    
      <span><a href="/tags/URL编码/">URL编码<small>1</small></a></span>
    
      <span><a href="/tags/XMPP/">XMPP<small>3</small></a></span>
    
      <span><a href="/tags/Xcode5-1/">Xcode5.1<small>1</small></a></span>
    
      <span><a href="/tags/api/">api<small>5</small></a></span>
    
      <span><a href="/tags/appStore审核/">appStore审核<small>1</small></a></span>
    
      <span><a href="/tags/block/">block<small>1</small></a></span>
    
      <span><a href="/tags/bytearray/">bytearray<small>1</small></a></span>
    
      <span><a href="/tags/cell自适应高度/">cell自适应高度<small>1</small></a></span>
    
      <span><a href="/tags/cocos2d/">cocos2d<small>3</small></a></span>
    
      <span><a href="/tags/fontfontiPhone开发font/">fontfontiPhone开发font<small>1</small></a></span>
    
      <span><a href="/tags/fontfontiPhone开发fontfont/">fontfontiPhone开发fontfont<small>1</small></a></span>
    
      <span><a href="/tags/fontfontios的fontfont/">fontfontios的fontfont<small>2</small></a></span>
    
      <span><a href="/tags/fontfont动画fontfont/">fontfont动画fontfont<small>1</small></a></span>
    
      <span><a href="/tags/framework/">framework<small>1</small></a></span>
    
      <span><a href="/tags/iOS8/">iOS8<small>2</small></a></span>
    
      <span><a href="/tags/iOS8-1-1/">iOS8.1.1<small>1</small></a></span>
    
      <span><a href="/tags/iOS8定位/">iOS8定位<small>1</small></a></span>
    
      <span><a href="/tags/iOS国际化/">iOS国际化<small>1</small></a></span>
    
      <span><a href="/tags/iOS应用开发之app上架/">iOS应用开发之app上架<small>1</small></a></span>
    
      <span><a href="/tags/iOS应用开发之第三方框架/">iOS应用开发之第三方框架<small>1</small></a></span>
    
      <span><a href="/tags/iOS开发/">iOS开发<small>5</small></a></span>
    
      <span><a href="/tags/iOS自定义Tabbar/">iOS自定义Tabbar<small>1</small></a></span>
    
      <span><a href="/tags/ios/">ios<small>53</small></a></span>
    
      <span><a href="/tags/ios7/">ios7<small>1</small></a></span>
    
      <span><a href="/tags/ios7适配/">ios7适配<small>1</small></a></span>
    
      <span><a href="/tags/ios国际化/">ios国际化<small>1</small></a></span>
    
      <span><a href="/tags/ios开发/">ios开发<small>27</small></a></span>
    
      <span><a href="/tags/iphone/">iphone<small>4</small></a></span>
    
      <span><a href="/tags/iphone开发/">iphone开发<small>59</small></a></span>
    
      <span><a href="/tags/itunes/">itunes<small>1</small></a></span>
    
      <span><a href="/tags/objective-c/">objective-c<small>1</small></a></span>
    
      <span><a href="/tags/svn/">svn<small>1</small></a></span>
    
      <span><a href="/tags/uiimage/">uiimage<small>2</small></a></span>
    
      <span><a href="/tags/uitableview/">uitableview<small>1</small></a></span>
    
      <span><a href="/tags/uitableviewcell/">uitableviewcell<small>1</small></a></span>
    
      <span><a href="/tags/uitextfield/">uitextfield<small>1</small></a></span>
    
      <span><a href="/tags/uiview/">uiview<small>3</small></a></span>
    
      <span><a href="/tags/uiviewcontroller/">uiviewcontroller<small>1</small></a></span>
    
      <span><a href="/tags/uiwebview/">uiwebview<small>1</small></a></span>
    
      <span><a href="/tags/xcode/">xcode<small>2</small></a></span>
    
      <span><a href="/tags/xmpp/">xmpp<small>1</small></a></span>
    
      <span><a href="/tags/二维码/">二维码<small>1</small></a></span>
    
      <span><a href="/tags/企业/">企业<small>1</small></a></span>
    
      <span><a href="/tags/动画/">动画<small>5</small></a></span>
    
      <span><a href="/tags/国际化/">国际化<small>1</small></a></span>
    
      <span><a href="/tags/在线工具/">在线工具<small>1</small></a></span>
    
      <span><a href="/tags/多线程/">多线程<small>1</small></a></span>
    
      <span><a href="/tags/存储/">存储<small>1</small></a></span>
    
      <span><a href="/tags/宏/">宏<small>1</small></a></span>
    
      <span><a href="/tags/导航/">导航<small>1</small></a></span>
    
      <span><a href="/tags/屏幕旋转/">屏幕旋转<small>2</small></a></span>
    
      <span><a href="/tags/应用程序/">应用程序<small>2</small></a></span>
    
      <span><a href="/tags/微信开放平台ios/">微信开放平台ios<small>1</small></a></span>
    
      <span><a href="/tags/打开AppStore/">打开AppStore<small>1</small></a></span>
    
      <span><a href="/tags/数据库/">数据库<small>1</small></a></span>
    
      <span><a href="/tags/缓存/">缓存<small>1</small></a></span>
    
      <span><a href="/tags/聊天/">聊天<small>1</small></a></span>
    
      <span><a href="/tags/苹果应用商店/">苹果应用商店<small>1</small></a></span>
    
      <span><a href="/tags/获取iP地址/">获取iP地址<small>1</small></a></span>
    
  </div>
</div>




  <script type="text/javascript">
    (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
      (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
      e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
    })(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st');

    _st('install','6xH6jcZvsZxn2a9rcU4t');
  </script>
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div id="foot-nav">
  <ul class="social">
    
      <li><a class="github" href="https://github.com/DaiXiang" title="github">github</a></li>
    
      <li><a class="rss" href="/atom.xml" title="rss">rss</a></li>
    
  </ul>
</div>
<div>
  
    &copy; 2014 尹现伟
  
</div>
<div class="clearfix"></div></footer>
  


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<script type="text/javascript">
  function navbar() {
    var top = $('#nav-top').innerHeight();
    $('#header').css('min-height', top);
  }
  navbar();
  $(window).resize(navbar);
</script>
<div id="totop" class="footer-btn">
  <a title="Return to Top"><img src="/img/scrollup.png"/></a>
</div>

<script type="text/javascript">
  $(function(){ 
	// When to show the scroll link
	// higher number = scroll link appears further down the page   
	var upperLimit = 800;
	
	// Our scroll link element
	var scrollElem = $('#totop');
   
	// Scroll to top speed
	var scrollSpeed = 500;
   
	// Show and hide the scroll to top link based on scroll position   
	scrollElem.hide();
	$(window).scroll(function () {            
		var scrollTop = $(document).scrollTop();       
		if ( scrollTop > upperLimit ) {
		  $(scrollElem).stop().fadeTo(300, 1); // fade back in
		  $(scrollElem).animate({bottom: "50px"}, { queue: false, duration: 10 });
		} else {
		  $(scrollElem).stop().fadeTo(300, 0); // fade out
	      $(scrollElem).animate({bottom: "-200px"}, { queue: false, duration: 10 });
			
		}
	});

	// Scroll to top animation on click
	$(scrollElem).click(function(){
	  $('html, body').animate({scrollTop:0}, scrollSpeed);
	  $(scrollElem).animate({bottom: "-200px"}, { queue: false, duration: 10 });
	  return false;
	});
  });
</script>
</body>
</html>